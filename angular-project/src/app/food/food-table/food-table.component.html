<div class="food-table-top">
  <mat-form-field class="type-food-filter">
    <mat-label>Type</mat-label>
    <mat-select [(ngModel)]="typeValue" (ngModelChange)="filterFoods()">
      <mat-option value="">All</mat-option>
      <mat-option value="Ramen">Ramen</mat-option>
      <mat-option value="Bento">Bento</mat-option>
      <mat-option value="Snack">Snack</mat-option>
      <mat-option value="Minuman">Minuman</mat-option>
    </mat-select>
  </mat-form-field>

    <mat-form-field class="stock-filter">
      <input
        matInput
        type="number"
        placeholder="Filter by Stock Left"
        [(ngModel)]="stockFilter"
        (ngModelChange)="filterFoods()"
      />
    </mat-form-field>
    <mat-form-field class="popularity-filter">
      <input
        matInput
        type="number"
        placeholder="Filter by Popularity"
        [(ngModel)]="popularityFilter"
        (ngModelChange)="filterFoods()"
      />
    </mat-form-field>

  <mat-form-field class="search-food-filter">
    <mat-label>Search Type</mat-label>
    <mat-select
      [(ngModel)]="selectedSearchType"
      (ngModelChange)="filterFoods()"
    >
      <mat-option value="name">Name</mat-option>
      <mat-option value="price">Price</mat-option>
      <mat-option value="stock">Stock</mat-option>
    </mat-select>
  </mat-form-field>

  <mat-form-field appearance="fill" class="search-food-input">
    <mat-label>Search</mat-label>
    <input
      matInput
      [(ngModel)]="searchValue"
      (ngModelChange)="filterFoods()"
      placeholder="Search"
    />
  </mat-form-field>
</div>

<div class="table-container">
  <table
    class="food-table"
    mat-table
    [dataSource]="dataSource"
    matSort
    (matSortChange)="sortData($event)"
  >
    <ng-container matColumnDef="no">
      <th mat-header-cell *matHeaderCellDef>No</th>
      <td mat-cell *matCellDef="let food; let i = index">{{ i + 1 }}</td>
    </ng-container>

    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef mat-sort-header="name" colspan="2">
        Name
      </th>
      <td mat-cell *matCellDef="let food" colspan="2">
        {{ food.name }}
      </td>
    </ng-container>

    <ng-container matColumnDef="type">
      <th mat-header-cell mat-sort-header="type" *matHeaderCellDef>Type</th>
      <td mat-cell *matCellDef="let food">{{ food.type }}</td>
    </ng-container>

    <ng-container matColumnDef="price">
      <th mat-header-cell mat-sort-header="price" *matHeaderCellDef>Price</th>
      <td mat-cell *matCellDef="let food">{{ food.price }}</td>
    </ng-container>

    <ng-container matColumnDef="stock">
      <th mat-header-cell mat-sort-header="stock" *matHeaderCellDef>Stock</th>
      <td mat-cell *matCellDef="let food">
        {{ food.stock }}
      </td>
    </ng-container>

    <ng-container matColumnDef="popularity">
      <th mat-header-cell mat-sort-header="popularity" *matHeaderCellDef>
        Popularity
      </th>
      <td mat-cell *matCellDef="let food">
        <span>{{ food.popularity }}</span>
      </td>
    </ng-container>

    <ng-container matColumnDef="action">
      <th mat-header-cell *matHeaderCellDef>Action</th>
      <td mat-cell *matCellDef="let food">
        <button
          mat-icon-button
          class="food-icon-detail"
          (click)="goToDetailfood(food._id)"
        >
          <mat-icon>details</mat-icon>
        </button>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  </table>
</div>

<mat-paginator
  class="food-paginator"
  style="background-color: #f2d1b5"
  [pageSizeOptions]="[5, 10, 15]"
  showFirstLastButtons
  aria-label="Select page of foods"
>
</mat-paginator>
